import requests
from bs4 import BeautifulSoup
import requests
import re
from termcolor import colored
from shodan_scraper import ShodanScraper
from exploitdb import ExploitDB
from proxy import Proxy
import threading
import time


def run_get_ips_thread(scraper):
    scraper.get_ips()
    time.sleep(1)

def get_CVEs_thread(scraper):
    scraper.get_CVEs()


if __name__ == "__main__":
    proxy = Proxy(proxy_source="working_proxies.txt")
    scraper = ShodanScraper("olsztyn",proxy)
    exploitdb = ExploitDB()

    num_threads = 20
    threads = []
    for i in range(num_threads):
        scraper.thread = threading.Thread(target=run_get_ips_thread, args=(scraper,))
        threads.append(scraper.thread)
        scraper.thread.start()
        time.sleep(1)
    #print(scraper.get_CVEs(exploitdb))
        
