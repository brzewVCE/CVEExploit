import requests
from proxy import Proxy
from termcolor import colored


def get_ip(proxies):
    try:
        proxy = proxies.get_proxies()
        response = requests.get("https://api.ipify.org", proxies=proxy, timeout=5)
        return response.text.strip()
    except Exception as e:
        print(colored(f"Error occurred while getting IP", "red"))
        return None


if __name__ == "__main__":
        proxies = Proxy(protocol="working")
        while True:
            ip = get_ip(proxies)
            if ip is not None:
                print(colored(f"Your IP address is {ip}", "green"))
            else:
                print("Failed to retrieve IP.")